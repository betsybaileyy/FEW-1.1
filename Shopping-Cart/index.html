<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <style>
        
        </style>
    </head>

    <body>

        <form id="add-form">
            <label>Name: <input id="item-name" type="text" placeholder="Item Name"></label>
            <label>Price: <input id="item-price" type="number" step="0.01"></label>
            <button type="submit">Add Item</button>
        </form>

        <div id="cart-qty">
            <!-- Cart Qty Here -->
        </div>

        <ul id="item-list">
            <!-- Cart Items -->
        </ul>

        <div id="cart-total">
            <!-- Cart total -->
        </div>
       

        <script>
            const itemList = document.getElementById('item-list')
            const cartQty = document.getElementById('cart-qty')
            const cartTotal = document.getElementById('cart-total')
            const addForm = document.getElementById('add-form')

            const cart = [ ]
           
            // ---------------------------------------------------
            // handle add form submit
            addForm.onsubmit = function(e) {
                e.preventDefault()
                console.log(e)
            }


           // -----------------------------------------------------
           // Add item
            function addItem(name, price) {
                for (let i = 0; i < cart.length; i += 1) {
                    if (cart[i].name === name) {
                        cart[i].qty += 1
                        return
                    }
                }
                const item = { name, price, qty: 1 }
                cart.push(item)
            }

            // ----------------------------------------------------
            // Show Items
            function showItems() {
                const qty = getQty()
                cartQty.innerHTML = `You have ${qty} items in your cart`

                let itemStr = ''
                for (let i = 0; i < cart.length; i += 1) {
                    // console.log(`- ${ cart[i].name } $${ cart[i].price } x ${ cart[i].qty }`)
                    // const name = cart[i].name
                    // const price = cart[i].price
                    // const qty = cart[i].qty

                    const { name, price, qty } = cart[i]

                    itemStr += `<li>${name} $${price} x ${qty} = ${qty * price}</li>`
                }
                itemList.innerHTML = itemStr

                cartTotal.innerHTML = `Total in cart: $${getTotal()}`

            }

            // Get quantity
            function getQty() {
                let qty = 0
                for (let i = 0; i < cart.length; i += 1) {
                    qty += cart[i].qty
                }
                return qty
            }

            // Get total
            function getTotal() {
                let total = 0
                for (let i = 0; i < cart.length; i += 1) {
                    total += cart[i].price * cart[i].qty
                }
                return total.toFixed(2)
            }

            // Remove Item
            function removeItem(name, qty = 0) {
                for (let i = 0; i < cart.length; i += 1) {
                    if (cart[i].name === name) {
                        if (qty > 0) {
                            cart[i].qty -= qty
                        }
                      
                        if (cart[i].qty < 1 || qty === 0) {
                           cart.splice(i, 1)
                        }
                        return
                    }
                }
            }

            // --------------------------------

            addItem('Apple', 0.99)
            addItem('Orange', 1.29)
            addItem('Banana', 2.99)
            addItem('Frisbee', 9.92)

            showItems()

            removeItem('Apple')
            removeItem('Frisbee')

            
        </script>
    </body>
